============================= test session starts ==============================
platform darwin -- Python 2.6.7 -- pytest-2.2.1
collecting ... collected 5 items

test_pep257.py F...F

=================================== FAILURES ===================================
_________________________ test_parse_module_docstring __________________________

file_1 = '#!shebang\n# comment\n\'\'\'Module docstring.\\n\\t\'\'\'\n\nglob = r\'oh, hai\'\n\nimport os\nprint 2 + 2\n\nclass OhHai(object):\n    # comment\n    r"Class docstring."\n    pass\n\ndef foo(bar):\n    """Def docstring"""\n\n    return\n'

    def test_parse_module_docstring(file_1):
        from pep257 import parse_module_docstrings as pmd
        out = pmd(file_1)
>       assert out[0][1] == r"'''Module docstring.\n\t'''"
E       assert '#!shebang\n#...n    return\n' == "'''Module docstring.\\n\\t'''"
E         - #!shebang
E         - # comment
E           '''Module docstring.\n\t'''
E         - 
E         - glob = r'oh, hai'
E         - 
E         - import os
E         - print 2 + 2
E         - 
E         - class OhHai(object):
E         -     # comment
E         -     r"Class docstring."
E         -     pass
E         - 
E         - def foo(bar):
E         -     """Def docstring"""
E         - 
E         -     return

test_pep257.py:12: AssertionError
_____________________________ test_parse_docstring _____________________________

file_1 = '#!shebang\n# comment\n\'\'\'Module docstring.\\n\\t\'\'\'\n\nglob = r\'oh, hai\'\n\nimport os\nprint 2 + 2\n\nclass OhHai(object):\n    # comment\n    r"Class docstring."\n    pass\n\ndef foo(bar):\n    """Def docstring"""\n\n    return\n'

    def test_parse_docstring(file_1):
        from pep257 import parse_docstring as pd
    
        token_gen = tk.generate_tokens(StringIO(file_1).readline)
        for i in token_gen:
            print i
    
    
>       assert False
E       assert False

test_pep257.py:45: AssertionError
------------------------------- Captured stdout --------------------------------
(53, u'#!shebang', (1, 0), (1, 9), u'#!shebang\n')
(54, u'\n', (1, 9), (1, 10), u'#!shebang\n')
(53, u'# comment', (2, 0), (2, 9), u'# comment\n')
(54, u'\n', (2, 9), (2, 10), u'# comment\n')
(3, u"'''Module docstring.\\n\\t'''", (3, 0), (3, 27), u"'''Module docstring.\\n\\t'''\n")
(4, u'\n', (3, 27), (3, 28), u"'''Module docstring.\\n\\t'''\n")
(54, u'\n', (4, 0), (4, 1), u'\n')
(1, u'glob', (5, 0), (5, 4), u"glob = r'oh, hai'\n")
(51, u'=', (5, 5), (5, 6), u"glob = r'oh, hai'\n")
(3, u"r'oh, hai'", (5, 7), (5, 17), u"glob = r'oh, hai'\n")
(4, u'\n', (5, 17), (5, 18), u"glob = r'oh, hai'\n")
(54, u'\n', (6, 0), (6, 1), u'\n')
(1, u'import', (7, 0), (7, 6), u'import os\n')
(1, u'os', (7, 7), (7, 9), u'import os\n')
(4, u'\n', (7, 9), (7, 10), u'import os\n')
(1, u'print', (8, 0), (8, 5), u'print 2 + 2\n')
(2, u'2', (8, 6), (8, 7), u'print 2 + 2\n')
(51, u'+', (8, 8), (8, 9), u'print 2 + 2\n')
(2, u'2', (8, 10), (8, 11), u'print 2 + 2\n')
(4, u'\n', (8, 11), (8, 12), u'print 2 + 2\n')
(54, u'\n', (9, 0), (9, 1), u'\n')
(1, u'class', (10, 0), (10, 5), u'class OhHai(object):\n')
(1, u'OhHai', (10, 6), (10, 11), u'class OhHai(object):\n')
(51, u'(', (10, 11), (10, 12), u'class OhHai(object):\n')
(1, u'object', (10, 12), (10, 18), u'class OhHai(object):\n')
(51, u')', (10, 18), (10, 19), u'class OhHai(object):\n')
(51, u':', (10, 19), (10, 20), u'class OhHai(object):\n')
(4, u'\n', (10, 20), (10, 21), u'class OhHai(object):\n')
(53, u'# comment', (11, 4), (11, 13), u'    # comment\n')
(54, u'\n', (11, 13), (11, 14), u'    # comment\n')
(5, u'    ', (12, 0), (12, 4), u'    r"Class docstring."\n')
(3, u'r"Class docstring."', (12, 4), (12, 23), u'    r"Class docstring."\n')
(4, u'\n', (12, 23), (12, 24), u'    r"Class docstring."\n')
(1, u'pass', (13, 4), (13, 8), u'    pass\n')
(4, u'\n', (13, 8), (13, 9), u'    pass\n')
(54, u'\n', (14, 0), (14, 1), u'\n')
(6, '', (15, 0), (15, 0), u'def foo(bar):\n')
(1, u'def', (15, 0), (15, 3), u'def foo(bar):\n')
(1, u'foo', (15, 4), (15, 7), u'def foo(bar):\n')
(51, u'(', (15, 7), (15, 8), u'def foo(bar):\n')
(1, u'bar', (15, 8), (15, 11), u'def foo(bar):\n')
(51, u')', (15, 11), (15, 12), u'def foo(bar):\n')
(51, u':', (15, 12), (15, 13), u'def foo(bar):\n')
(4, u'\n', (15, 13), (15, 14), u'def foo(bar):\n')
(5, u'    ', (16, 0), (16, 4), u'    """Def docstring"""\n')
(3, u'"""Def docstring"""', (16, 4), (16, 23), u'    """Def docstring"""\n')
(4, u'\n', (16, 23), (16, 24), u'    """Def docstring"""\n')
(54, u'\n', (17, 0), (17, 1), u'\n')
(1, u'return', (18, 4), (18, 10), u'    return\n')
(4, u'\n', (18, 10), (18, 11), u'    return\n')
(6, '', (19, 0), (19, 0), '')
(0, '', (19, 0), (19, 0), '')
====================== 2 failed, 3 passed in 0.07 seconds ======================
